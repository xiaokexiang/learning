> Java虚拟机把`描述类的数据从Class文件加载到内存`，并对数据进行`校验、转换解析和初始化`，最终形成可以被虚拟机`直接使用`的Java类型。
>
> tips: Java中的`Class对象`是用于操作`.class文件`的。

### 类加载时机

#### 类加载的生命周期

![](https://image.leejay.top/Fp0TSKAc1i8rSPKcAe1t36qz4a7e)

> 类型被加载到虚拟机内存中开始，到卸载出内存为止，整个生命周期经历如上七个阶段。
>
> 其中`验证、准备、解析`统称为`连接`。
>
> 需要注意的是：`解析阶段顺序是不确定的`，它可以在`初始化阶段之后再开始`。

#### 类初始化的六种情况

**《Java虚拟机规范》**中规定了`六种`要立即`对类进行”初始化“(加载、验证、准备自然需要在此之前执行)`的情况：

- 遇到`new`、`getstatic`、`putstatic`、`invokestatic`这四条字节码指令时，类型没有过初始化，生成这四条字节码指令的场景有：

  - 使用`new`关键字实例化对象。

  - 读取或设置一个类型的`静态字段(final修饰、编译器进入常量池的静态字段除外)`。

  - 调用一个类型的静态方法

- 通过`java.lang.Reflect`对方法进行反射调用时

- 初始化类时发现其`父类`还没有初始化。

- 接口中定义的`default`方法，若该接口的实现类发生初始化，`default`方法在此之前要被初始化。

- `java.lang.invoke.MethodHandle`实例的解析结果为`REF_getstatic`、`REF_putstatic`、`REF_invokestatic`、`REF_newInvokeSpecial`四种类型的方法句柄还没有初始化时。

### 

